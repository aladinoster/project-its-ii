<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Intelligent Transportation Systems ITS - II</title>
  <meta name="description" content="This is a website to describe the Intelligent Transportation Systems (ITS) - Part II Project">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Intelligent Transportation Systems ITS - II" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a website to describe the Intelligent Transportation Systems (ITS) - Part II Project" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Intelligent Transportation Systems ITS - II" />
  
  <meta name="twitter:description" content="This is a website to describe the Intelligent Transportation Systems (ITS) - Part II Project" />
  

<meta name="author" content="Andres Ladino - Angelo Furno">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="project-information.html">
<link rel="next" href="project-2-vehicle-platooning.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">ITS-II Smart for Mobility</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>ITS for Smart Mobility</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#context"><i class="fa fa-check"></i>Context</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#projects"><i class="fa fa-check"></i>Projects</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#general-objectives"><i class="fa fa-check"></i>General Objectives</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="project-information.html"><a href="project-information.html"><i class="fa fa-check"></i>Project information</a><ul>
<li class="chapter" data-level="" data-path="project-information.html"><a href="project-information.html#deliverables"><i class="fa fa-check"></i>Deliverables</a></li>
<li class="chapter" data-level="" data-path="project-information.html"><a href="project-information.html#reporting"><i class="fa fa-check"></i>Reporting</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="project-1-signalized-traffic.html"><a href="project-1-signalized-traffic.html"><i class="fa fa-check"></i><b>1</b> Project 1: Signalized Traffic</a><ul>
<li class="chapter" data-level="" data-path="project-1-signalized-traffic.html"><a href="project-1-signalized-traffic.html#objectives"><i class="fa fa-check"></i>Objectives</a></li>
<li class="chapter" data-level="" data-path="project-1-signalized-traffic.html"><a href="project-1-signalized-traffic.html#description"><i class="fa fa-check"></i>Description</a><ul>
<li class="chapter" data-level="" data-path="project-1-signalized-traffic.html"><a href="project-1-signalized-traffic.html#task-1-modeling"><i class="fa fa-check"></i>Task 1: Modeling</a></li>
<li class="chapter" data-level="" data-path="project-1-signalized-traffic.html"><a href="project-1-signalized-traffic.html#task-2-simulation"><i class="fa fa-check"></i>Task 2: Simulation</a></li>
<li class="chapter" data-level="" data-path="project-1-signalized-traffic.html"><a href="project-1-signalized-traffic.html#task-3-control-strategy"><i class="fa fa-check"></i>Task 3: Control strategy</a></li>
<li class="chapter" data-level="" data-path="project-1-signalized-traffic.html"><a href="project-1-signalized-traffic.html#task-4-performance-evaluation"><i class="fa fa-check"></i>Task 4: Performance evaluation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="project-1-signalized-traffic.html"><a href="project-1-signalized-traffic.html#sources"><i class="fa fa-check"></i>Sources</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="project-2-vehicle-platooning.html"><a href="project-2-vehicle-platooning.html"><i class="fa fa-check"></i><b>2</b> Project 2: Vehicle Platooning</a><ul>
<li class="chapter" data-level="" data-path="project-2-vehicle-platooning.html"><a href="project-2-vehicle-platooning.html#objectives-1"><i class="fa fa-check"></i>Objectives</a></li>
<li class="chapter" data-level="" data-path="project-2-vehicle-platooning.html"><a href="project-2-vehicle-platooning.html#description-1"><i class="fa fa-check"></i>Description</a><ul>
<li class="chapter" data-level="" data-path="project-2-vehicle-platooning.html"><a href="project-2-vehicle-platooning.html#task-1-platoon-modeling"><i class="fa fa-check"></i>Task 1: Platoon modeling</a></li>
<li class="chapter" data-level="" data-path="project-2-vehicle-platooning.html"><a href="project-2-vehicle-platooning.html#task-2-open-loop-simulation"><i class="fa fa-check"></i>Task 2: Open loop simulation</a></li>
<li class="chapter" data-level="" data-path="project-2-vehicle-platooning.html"><a href="project-2-vehicle-platooning.html#task-3-vehicle-platoon-control"><i class="fa fa-check"></i>Task 3: Vehicle platoon control</a></li>
<li class="chapter" data-level="" data-path="project-2-vehicle-platooning.html"><a href="project-2-vehicle-platooning.html#task-4-performance-evaluation-1"><i class="fa fa-check"></i>Task 4: Performance evaluation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="project-2-vehicle-platooning.html"><a href="project-2-vehicle-platooning.html#sources-1"><i class="fa fa-check"></i>Sources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="project-4-density-reconstruction.html"><a href="project-4-density-reconstruction.html"><i class="fa fa-check"></i><b>3</b> Project 4: Density Reconstruction</a><ul>
<li class="chapter" data-level="" data-path="project-4-density-reconstruction.html"><a href="project-4-density-reconstruction.html#sources-2"><i class="fa fa-check"></i>Sources</a></li>
<li class="chapter" data-level="" data-path="project-4-density-reconstruction.html"><a href="project-4-density-reconstruction.html#reference"><i class="fa fa-check"></i>Reference</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Intelligent Transportation Systems ITS - II</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="project-1-signalized-traffic" class="section level1">
<h1><span class="header-section-number">Chapter 1</span> Project 1: Signalized Traffic</h1>
<p>The main objective of this project is to design <em>traffic light signal</em> controls in order to optimize particular traffic conditions. Traffic signals regularly pre-establish fixed values <em>red</em> or <em>green</em> for a particular intersection. In fact the behavior can be modeled as:</p>

<div class="figure" style="text-align: center"><span id="fig:tlight"></span>
<img src="its-2-project_files/figure-html/tlight-1.png" alt="Traffic light signal example." width="336" />
<p class="caption">
Figure 1.1: Traffic light signal example.
</p>
</div>
<p>The relationship between the switched green/red time in a traffic light can be represented by a pulse signal (Figure <a href="project-1-signalized-traffic.html#fig:tlight">1.1</a>). The red line in the figure represents the <em>duty cycle</em> which represents the fraction of time the light was in green (<span class="math inline">\(1\)</span>) with respect to the total cycle time (<span class="math inline">\(60s\)</span>). In this case, the main objective is to study traffic models that can model signalized intersections and design control laws.</p>
<hr />
<div id="objectives" class="section level2 unnumbered">
<h2>Objectives</h2>
<p>The main objective of this project is to:</p>
<ol style="list-style-type: decimal">
<li>Study the fundamental aspects of traffic signal control strategies.</li>
<li>Obtain and simulate a macroscopic traffic model for a urban network with traffic signals</li>
<li>Create and design control strategies applied via traffic signals in urban traffic networks.</li>
<li>Compare the behavior of fixed-time traffic signal polices and dynamic-time traffic signal polices.</li>
</ol>
</div>
<div id="description" class="section level2 unnumbered">
<h2>Description</h2>
<div id="task-1-modeling" class="section level3 unnumbered">
<h3>Task 1: Modeling</h3>
<p>Check models for macroscopic networks: <span class="citation">(Grandinetti, Canudas-de-wit, and Garin <a href="#ref-Grandinetti2015">2015</a>)</span>, <span class="citation">(Grandinetti, Garin, and Canudas-de-wit <a href="#ref-Grandinetti2016">2015</a>)</span>,<span class="citation">(Varaiya <a href="#ref-Varaiya2013:TR-C">2013</a>)</span>. Determine the parameters required to model a road traffic network.</p>
<div id="context-1" class="section level4 unnumbered">
<h4>Context</h4>
<p>Before implementing a real scenario in this phase we aim to describe the context of a virtual example. Consider the following traffic urban corridor which obeys a simplified version of the real arterial scenario.</p>

<div class="figure" style="text-align: center"><span id="fig:city"></span>
<img src="images/p1-01-network.png" alt="Example of traffic network."  />
<p class="caption">
Figure 1.2: Example of traffic network.
</p>
</div>
<p>The network of Figure <a href="project-1-signalized-traffic.html#fig:city">1.2</a> represents a regular corridor in a city like. The priority for this type of corridors is to maximize the priority of green time so the traffic does not get congested along the network. It is important to highlight that for the proposed network</p>
</div>
<div id="questions" class="section level4 unnumbered">
<h4>Questions</h4>
<ul>
<li>Based on a literature review, determine current existing traffic models for signalized traffic networks.</li>
<li>For the network in Figure <a href="project-1-signalized-traffic.html#fig:city">1.2</a>, build a macroscopic signalized traffic model.</li>
<li>Determine the <em>signalized/averaged</em> traffic model for the case where lights are installed along each intersection of the corridor. For those roads in which direction is not explicitly defined, consider the direction of a regular intersection.</li>
</ul>
</div>
<div id="expected-outcomes" class="section level4 unnumbered">
<h4>Expected outcomes</h4>
<ul>
<li><p>Present a brief summary of the existing current models for signalized traffic networks. At same time highlight the key features of these models and the remaining difficulties. Consider including references for the presented models.</p></li>
<li><p>Based on <span class="citation">(Grandinetti, Canudas-de-wit, and Garin <a href="#ref-Grandinetti2015">2015</a>)</span> obtain a model for the signalized network of Figure <a href="project-1-signalized-traffic.html#fig:city">1.2</a> and the parameters required model this corridor.</p></li>
<li><p>Define the set of parameters for the traffic network, notably those related to the fundamental diagram as well as the traffic light signal timings. Consider a fixed setup of this parameters for the moment and overall explain the reason of the choice.</p></li>
</ul>
</div>
</div>
<div id="task-2-simulation" class="section level3 unnumbered">
<h3>Task 2: Simulation</h3>
<p>Dynamic simulation of open loop traffic networks. For this task be sure to review already implemented simulations available at <a href="https://github.com/andres-ladino-ifsttar/traffic-macrosimulator">Link</a>. Get familiar with the code here developed before you enter into details of implementation.</p>
<div id="context-2" class="section level4 unnumbered">
<h4>Context</h4>
<p>Based on the model established in the <strong>Task 1</strong> and considering a family of specific parameters, perform a simulation for a constant demand value of demand in <span class="math inline">\(veh/hr\)</span> as specified in the Figure<a href="project-1-signalized-traffic.html#fig:flow">1.3</a>.</p>

<div class="figure" style="text-align: center"><span id="fig:flow"></span>
<img src="images/p1-02-flows.png" alt="Demand profiles for a specified scenario."  />
<p class="caption">
Figure 1.3: Demand profiles for a specified scenario.
</p>
</div>
</div>
<div id="questions-1" class="section level4 unnumbered">
<h4>Questions</h4>
<ul>
<li><p>Simulate and obtain density plots of the dynamic the behaviour when the <em>duty cyle</em> of lights is similar for all the traffic lights. <span class="math inline">\(50\%\)</span></p></li>
<li><p>Does the current values create a congestion in the proposed network?</p></li>
<li><p>How can the performance of the network be improved? Create a second set of parameters for the traffic lights <em>duty cycle</em></p></li>
<li><p>For the existing model and according to <span class="citation">(Grandinetti, Canudas-de-wit, and Garin <a href="#ref-Grandinetti2015">2015</a>)</span> obtain the two different <em>density</em> and <em>flow</em> dynamic profiles between a <em>switched</em> signalized traffic model and an <em>averaged</em> traffic model</p></li>
</ul>
</div>
<div id="expected-outcomes-1" class="section level4 unnumbered">
<h4>Expected outcomes</h4>
<ul>
<li><p>Present the dynamic profiles for density on each one of the roads under different setups of traffic lights. The dynamic profiles should specify density per road in time</p></li>
<li><p>Provide comparisons between different traffic signalized models and an analysis on how this error evolves according to different values of demand.</p></li>
<li><p>Specify a second set of parameters for <em>duty cycle</em> that could improve the performance of the network with respect to the <span class="math inline">\(50\%\)</span> case. Justify the reason of your choice and verify in results the desired behavior.</p></li>
</ul>
</div>
</div>
<div id="task-3-control-strategy" class="section level3 unnumbered">
<h3>Task 3: Control strategy</h3>
<p>For this task we aim to consider the <em>duty cycle</em> as a control input variable to regulate the flow within the traffic network. In this case take into account that the decision variable needs somehow to be determined dynamically via a control algorithm.</p>
<div id="context-3" class="section level4 unnumbered">
<h4>Context</h4>
<p>For the Figure <a href="project-1-signalized-traffic.html#fig:tlight">1.1</a> the average value can be found as:</p>
<span class="math display" id="eq:avgu">\[\begin{equation}
\bar{u} = \frac{1}{T}\int_0^T u(\tau) d\tau \tag{1.1}
\end{equation}\]</span>
<p>As it is illustrated in <span class="citation">(Grandinetti, Garin, and Canudas-de-wit <a href="#ref-Grandinetti2016">2015</a>)</span>, in Eq. <a href="project-1-signalized-traffic.html#eq:avgu">(1.1)</a> is easier to design a value for <span class="math inline">\(\bar{u}\)</span> rather than <span class="math inline">\(u\)</span> due to its binary character.</p>
</div>
<div id="questions-2" class="section level4 unnumbered">
<h4>Questions</h4>
<ul>
<li><p>Explain and construct a block diagram illustrating the control of the road traffic network via traffic signals</p></li>
<li><p>Design and present an algorithm that takes decisions for the traffic signals based on the state of the network. How would you construct the value of <span class="math inline">\(u\)</span> based on the congestion state of the network.</p></li>
<li><p>Perform simulations of the system under a preestablished manual control and compare it to a situation where the control depends on the congestion state of the network.</p></li>
</ul>
</div>
<div id="expected-outcomes-2" class="section level4 unnumbered">
<h4>Expected outcomes</h4>
<ul>
<li><p>Present a comparison between the traffic network with signalized control and without signalized control.</p></li>
<li><p>Apply the controller over different versions of the model notably <em>averaged</em> and <em>switched</em></p></li>
<li><p>Compare the open loop situation with the closed loop situation and provide conclussions on the control performance.</p></li>
</ul>
</div>
</div>
<div id="task-4-performance-evaluation" class="section level3 unnumbered">
<h3>Task 4: Performance evaluation</h3>
<p>Finally in order to compare it is important to determine indicators than can be designed in order to compare the effects of introducing an automated control strategy.</p>
<div id="context-4" class="section level4 unnumbered">
<h4>Context</h4>
<p>Indicators for traffic networks are regularly expressed in terms of the state of the network, for example the <em>Service of Demand</em> (SoD) measured in terms of flow:</p>
<span class="math display" id="eq:sod">\[\begin{equation}
SOD = \int_0^T \sum_{r \in R} f_r(\tau) d\tau \tag{1.2}
\end{equation}\]</span>
<p>Or the <em>Total Travel Distance</em> (TTD) measured in terms of the density</p>
<span class="math display" id="eq:ttd">\[\begin{equation}
TTD = \int_0^T \sum_{r \in R} \rho_r(\tau) d\tau \tag{1.3}
\end{equation}\]</span>
</div>
<div id="questions-3" class="section level4 unnumbered">
<h4>Questions</h4>
<ul>
<li><p>What does the aforementioned indicators represent?</p></li>
<li><p>Measure the indicators over the traffic network with a manual setup of traffic signals <em>open-loop</em> vs a controlled setup of traffic signals <em>closed-loop</em>.</p></li>
</ul>
</div>
<div id="expected-outcomes-3" class="section level4 unnumbered">
<h4>Expected outcomes</h4>
<ul>
<li><p>Report indicators for both cases and conclude about the results.</p></li>
<li><p>Provide recomendations on how to design <span class="math inline">\(u\)</span> for the corridor</p></li>
</ul>
</div>
</div>
</div>
<div id="sources" class="section level2 unnumbered">
<h2>Sources</h2>
<p>For more details on how to deploy traffic simulations and traffic models please check:</p>
<ul>
<li><p><a href="https://github.com/andres-ladino-ifsttar/traffic-macrosimulator">Traffic Macrosimulator - Github</a></p></li>
<li><p>For traffic models check <span class="citation">(Grandinetti, Canudas-de-wit, and Garin <a href="#ref-Grandinetti2015">2015</a>)</span> available <a href="https://hal.archives-ouvertes.fr/hal-01188535">Link</a> and <span class="citation">(Grandinetti, Garin, and Canudas-de-wit <a href="#ref-Grandinetti2016">2015</a>)</span> available at <a href="https://hal.archives-ouvertes.fr/hal-01188811">Link</a></p></li>
</ul>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-Grandinetti2015">
<p>Grandinetti, Pietro, Carlos Canudas-de-wit, and Federica Garin. 2015. “An efficient one-step-ahead optimal control for urban signalized traffic networks based on an averaged Cell-Transmission Model.” In <em>2015 European Control Conference (Ecc)</em>, 3478–83. Vienna, Austria: IEEE. doi:<a href="https://doi.org/10.1109/ECC.2015.7331072">10.1109/ECC.2015.7331072</a>.</p>
</div>
<div id="ref-Grandinetti2016">
<p>Grandinetti, Pietro, Federica Garin, and Carlos Canudas-de-wit. 2015. “Towards scalable optimal traffic control.” In <em>54th IEEE Conference on Decision and Control (CDC 2015)</em>. Osaka, Japan. <a href="https://hal.archives-ouvertes.fr/hal-01188811" class="uri">https://hal.archives-ouvertes.fr/hal-01188811</a>.</p>
</div>
<div id="ref-Varaiya2013:TR-C">
<p>Varaiya, Pravin. 2013. “Max pressure control of a network of signalized intersections.” <em>Transportation Research Part C: Emerging Technologies</em> 36 (2). Elsevier Ltd: 177–95. doi:<a href="https://doi.org/10.1016/j.trc.2013.08.014">10.1016/j.trc.2013.08.014</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="project-information.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="project-2-vehicle-platooning.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/aladinoster/project-its-ii/edit/master/02-signal-traffic.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "section",
"edit": "https://github.com/aladinoster/project-its-ii/edit/master/%s",
"download": ["pdf", "epub"],
"search": true,
"fontsettings": {
"theme": "White",
"family": "sans"
},
"size": 2,
"sharing": {
"facebook": true,
"twitter": true,
"linkedin": true
},
"lib_dir": "book_assets"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
